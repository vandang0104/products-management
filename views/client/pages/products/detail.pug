extends ../../layouts/defaults.pug 
include ../../mixins/alert.pug

block main
  .container.my-3 
    .row
      .col-md-6
        .product-image.mb-4
          img.img-fluid.rounded(
            src=product.thumbnail, 
            alt=product.title,
            style="max-height: 400px; width: 100%; object-fit: cover;"
          )

      //- Product Info
      .col-md-6
        h1.product-title.mb-3 #{product.title}

        .product-price.mb-3
          if product.discountPercentage > 0
            .d-flex.align-items-center
              .discount-price.fw-bold.fs-3.text-danger.me-3
                | $#{((product.price * (100 - product.discountPercentage)) / 100).toFixed(2)}
              .original-price.text-muted
                del $#{product.price}
              .discount-percentage.badge.bg-success.ms-2
                | -#{product.discountPercentage}%
          else
            .current-price.fw-bold.fs-3
              | $#{product.price}

        //- Stock Status
        .product-stock.mb-3
          if product.stock > 0
            span.badge.bg-success Còn hàng (#{product.stock} sản phẩm)
          else
            span.badge.bg-danger Hết hàng

        //- Product Status
        .product-status.mb-3
          if product.status === 'active'
            span.badge.bg-primary Đang kinh doanh
          else
            span.badge.bg-secondary Ngừng kinh doanh

        //- Product Description
        .product-description.mb-4
          h5.fw-bold Mô tả sản phẩm
          p #{product.description}

        //- Action Buttons
        .product-actions.mb-4
          if product.stock > 0 && product.status === 'active'
            .d-flex.gap-2
              .quantity-selector.me-3
                label.form-label.me-2 Số lượng:
                input.form-control(
                  type="number", 
                  value="1", 
                  min="1", 
                  max=product.stock,
                  style="width: 80px;"
                )
              button.btn.btn-primary.btn-lg
                i.fas.fa-cart-plus.me-2
                | Thêm vào giỏ hàng
          else
            button.btn.btn-secondary.btn-lg(disabled)
              | Sản phẩm không khả dụng